# 7. Case Analysis

## What is Case Analysis?

Breaking down a problem into distinct scenarios based on input characteristics, then handling each scenario separately.

---

## Visual Framework

```
PROBLEM
   │
   ├─── Case 1: Condition A
   │         └─── Solution for Case 1
   │
   ├─── Case 2: Condition B
   │         └─── Solution for Case 2
   │
   └─── Case 3: Condition C
             └─── Solution for Case 3
```

---

## Example 1: Number Classification

```cpp
#include <iostream>
using namespace std;

int main() {
    int n;
    cin >> n;
    
    // Case analysis based on value ranges
    if (n < 0) {
        cout << "Case 1: Negative number\n";
        cout << "Absolute value: " << -n << "\n";
    }
    else if (n == 0) {
        cout << "Case 2: Zero\n";
        cout << "Neither positive nor negative\n";
    }
    else {
        cout << "Case 3: Positive number\n";
        cout << "Value: " << n << "\n";
    }
    
    return 0;
}
```

---

## Example 2: Array Length Cases

```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    vector<int> arr = {1, 2, 3, 4, 5};
    int n = arr.size();
    
    if (n == 1) {
        cout << "Case 1: Single element\n";
        cout << "Only one element: " << arr[0] << "\n";
    }
    else if (n == 2) {
        cout << "Case 2: Two elements\n";
        cout << "Pair: " << arr[0] << " and " << arr[1] << "\n";
    }
    else if (n % 2 == 0) {
        cout << "Case 3: Even length (≥4)\n";
        cout << "Can split into " << n/2 << " pairs\n";
    }
    else {
        cout << "Case 4: Odd length (≥3)\n";
        cout << "Middle element at index: " << n/2 << "\n";
    }
    
    return 0;
}
```

---

## Example 3: Comparison-Based Cases

```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 15, b = 10;
    
    if (a > b) {
        cout << "Case 1: a is greater\n";
        cout << "Difference: " << (a - b) << "\n";
    }
    else if (a < b) {
        cout << "Case 2: b is greater\n";
        cout << "Difference: " << (b - a) << "\n";
    }
    else {
        cout << "Case 3: Equal values\n";
        cout << "No difference\n";
    }
    
    return 0;
}
```

---

## Visual: Sum vs Bound Cases

```
Given: Sum S, Max value N

Case 1: S ≤ N
┌────────┬────────┐
│   a    │   b    │  Both can be small
└────────┴────────┘
   └─┬─┘    └─┬─┘
   0 to S   0

Example: S=3, N=5
Can use: a=0, b=3 ✓
         a=3, b=0 ✓

Case 2: S = 2N
┌────────┬────────┐
│   a    │   b    │  Both must be max
└────────┴────────┘
   └─┬─┘    └─┬─┘
     N        N

Example: S=10, N=5
Must use: a=5, b=5 ✓

Case 3: N < S < 2N
┌────────┬────────┐
│   a    │   b    │  One small, one large
└────────┴────────┘
   └─┬─┘    └──┬──┘
   varies    varies

Example: S=8, N=5
Can use: a=3, b=5 ✓
         a=5, b=3 ✓
```

```cpp
#include <iostream>
using namespace std;

int main() {
    int S, N;
    cin >> S >> N;
    
    if (S <= N) {
        cout << "Case 1: Small sum\n";
        cout << "Can make one value 0\n";
        cout << "Example: a=0, b=" << S << "\n";
    }
    else if (S == 2 * N) {
        cout << "Case 2: Maximum sum\n";
        cout << "Both must be max\n";
        cout << "Only option: a=" << N << ", b=" << N << "\n";
    }
    else {  // N < S < 2N
        cout << "Case 3: Medium sum\n";
        cout << "Both values must be > 0\n";
        int a = S - N;  // Minimum possible a
        int b = N;      // Maximum possible b
        cout << "Example: a=" << a << ", b=" << b << "\n";
    }
    
    return 0;
}
```

---

## Example 4: Distinct Value Cases

```cpp
#include <iostream>
#include <vector>
#include <unordered_set>
using namespace std;

int main() {
    vector<int> arr = {1, 2, 1, 2};
    
    unordered_set<int> distinct(arr.begin(), arr.end());
    int d = distinct.size();
    
    if (d == 1) {
        cout << "Case 1: All elements same\n";
        cout << "Single value: " << *distinct.begin() << "\n";
    }
    else if (d == 2) {
        cout << "Case 2: Two distinct values\n";
        cout << "Can form alternating pattern\n";
    }
    else if (d == arr.size()) {
        cout << "Case 3: All elements distinct\n";
        cout << "Every element appears once\n";
    }
    else {
        cout << "Case 4: Multiple values with repetition\n";
        cout << d << " distinct values\n";
    }
    
    return 0;
}
```

---

## Visual: Nested Cases

```
Main condition: Array length n

├─ n = 2
│    └─ Always valid
│
├─ n is odd (≥3)
│    ├─ All same → Valid
│    └─ Not all same
│         ├─ 2 distinct → Check frequencies
│         └─ 3+ distinct → Invalid
│
└─ n is even (≥4)
     ├─ All same → Valid
     └─ Not all same
          ├─ 2 distinct → Check frequencies
          └─ 3+ distinct → Invalid
```

```cpp
#include <iostream>
#include <vector>
#include <unordered_set>
#include <unordered_map>
using namespace std;

int main() {
    vector<int> arr = {1, 2, 1, 2, 1};
    int n = arr.size();
    
    unordered_set<int> distinct(arr.begin(), arr.end());
    
    if (n == 2) {
        cout << "Case: Length 2 - Always valid\n";
    }
    else if (distinct.size() == 1) {
        cout << "Case: All same - Valid\n";
    }
    else if (distinct.size() == 2) {
        cout << "Case: Two distinct values\n";
        
        unordered_map<int, int> freq;
        for (int x : arr) freq[x]++;
        
        vector<int> counts;
        for (auto [k, v] : freq) counts.push_back(v);
        
        int odd_positions = (n + 1) / 2;
        int even_positions = n / 2;
        
        if ((counts[0] == odd_positions && counts[1] == even_positions) ||
            (counts[1] == odd_positions && counts[0] == even_positions)) {
            cout << "Sub-case: Frequencies match - Valid\n";
        }
        else {
            cout << "Sub-case: Frequencies don't match - Invalid\n";
        }
    }
    else {
        cout << "Case: 3+ distinct values - Invalid\n";
    }
    
    return 0;
}
```

---

## Example 5: Edge Case Handling

```cpp
#include <iostream>
#include <vector>
using namespace std;

int findMax(vector<int>& arr) {
    if (arr.empty()) {
        cout << "Edge case: Empty array\n";
        return -1;  // Error value
    }
    
    if (arr.size() == 1) {
        cout << "Edge case: Single element\n";
        return arr[0];
    }
    
    // Normal case: Multiple elements
    int max_val = arr[0];
    for (int x : arr) {
        max_val = max(max_val, x);
    }
    return max_val;
}

int main() {
    vector<int> arr1 = {};
    vector<int> arr2 = {5};
    vector<int> arr3 = {3, 1, 4, 1, 5};
    
    cout << "Max of arr1: " << findMax(arr1) << "\n";
    cout << "Max of arr2: " << findMax(arr2) << "\n";
    cout << "Max of arr3: " << findMax(arr3) << "\n";
    
    return 0;
}
```

---

## Template for Case Analysis

```cpp
#include <iostream>
using namespace std;

void solve(int n) {
    // Identify key characteristics
    bool is_even = (n % 2 == 0);
    bool is_small = (n < 10);
    bool is_zero = (n == 0);
    
    // Handle special cases first
    if (is_zero) {
        cout << "Special case: Zero\n";
        return;
    }
    
    // Handle based on combinations
    if (is_small && is_even) {
        cout << "Case 1: Small even number\n";
    }
    else if (is_small && !is_even) {
        cout << "Case 2: Small odd number\n";
    }
    else if (!is_small && is_even) {
        cout << "Case 3: Large even number\n";
    }
    else {
        cout << "Case 4: Large odd number\n";
    }
}

int main() {
    solve(0);   // Special
    solve(4);   // Case 1
    solve(7);   // Case 2
    solve(100); // Case 3
    solve(99);  // Case 4
    
    return 0;
}
```
